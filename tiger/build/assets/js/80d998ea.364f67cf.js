"use strict";(self.webpackChunkbluearc_tiger_docs=self.webpackChunkbluearc_tiger_docs||[]).push([[607],{4718(e,s,r){r.r(s),r.d(s,{assets:()=>i,contentTitle:()=>d,default:()=>h,frontMatter:()=>n,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"legacy/docker-runbook","title":"7. Docker Runbook","description":"Start all services","source":"@site/docs/legacy/07-docker-runbook.md","sourceDirName":"legacy","slug":"/legacy/docker-runbook","permalink":"/doc/docs/legacy/docker-runbook","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"6. Threat Model","permalink":"/doc/docs/legacy/threat-model"},"next":{"title":"8. Admin Ops","permalink":"/doc/docs/legacy/admin-ops"}}');var c=r(4848),l=r(8453);const n={},d="7. Docker Runbook",i={},t=[{value:"Start all services",id:"start-all-services",level:2},{value:"Services",id:"services",level:2},{value:"Pool auto-discovery",id:"pool-auto-discovery",level:2},{value:"Relayer health and metrics",id:"relayer-health-and-metrics",level:2},{value:"Stop services",id:"stop-services",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.header,{children:(0,c.jsx)(s.h1,{id:"7-docker-runbook",children:"7. Docker Runbook"})}),"\n",(0,c.jsx)(s.h2,{id:"start-all-services",children:"Start all services"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-bash",children:"docker compose up --build\n"})}),"\n",(0,c.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"postgres"}),": durable quote/job DB"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"redis"}),": durable sessions/nonces/rate-limit counters"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"hardhat"}),": JSON-RPC on ",(0,c.jsx)(s.code,{children:"localhost:8545"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"deployer"}),": deploys contracts once and writes ",(0,c.jsx)(s.code,{children:"/shared/deploy.json"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"relayer"}),": API on ",(0,c.jsx)(s.code,{children:"localhost:8080"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"web"}),": UI on ",(0,c.jsx)(s.code,{children:"localhost:5173"})]}),"\n"]}),"\n",(0,c.jsx)(s.h2,{id:"pool-auto-discovery",children:"Pool auto-discovery"}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.code,{children:"relayer"})," mounts deploy volume read-only and reads ",(0,c.jsx)(s.code,{children:"/shared/deploy.json"}),".\nUI calls relayer ",(0,c.jsx)(s.code,{children:"/health"})," and auto-fills ",(0,c.jsx)(s.code,{children:"defaultPool"})," when available."]}),"\n",(0,c.jsx)(s.h2,{id:"relayer-health-and-metrics",children:"Relayer health and metrics"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-bash",children:"curl -s http://127.0.0.1:8080/health\ncurl -s http://127.0.0.1:8080/metrics\n"})}),"\n",(0,c.jsx)(s.h2,{id:"stop-services",children:"Stop services"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-bash",children:"docker compose down\n"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453(e,s,r){r.d(s,{R:()=>n,x:()=>d});var o=r(6540);const c={},l=o.createContext(c);function n(e){const s=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:n(e.components),o.createElement(l.Provider,{value:s},e.children)}}}]);